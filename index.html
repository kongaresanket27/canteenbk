<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Live Canteen Booking</title>
  <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>
  <style>
    body {
      background-color: #121212;
      color: #fff;
      font-family: Arial, sans-serif;
      padding: 20px;
    }
    .section {
      background: #1e1e1e;
      padding: 20px;
      border-radius: 12px;
      margin-bottom: 20px;
    }
    button {
      padding: 10px 20px;
      margin: 10px 5px 0 0;
      background: #00ffe7;
      color: #000;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-weight: bold;
    }
    h2 {
      color: #00ffe7;
    }
    input {
      padding: 10px;
      margin-top: 10px;
      border-radius: 8px;
      border: none;
      width: 100%;
      background-color: #2e2e2e;
      color: white;
    }
  </style>
</head>
<body>

  <h1>🍴 Live Canteen Booking</h1>

  <!-- Seat Booking Section -->
  <div class="section">
    <h2>🪑 Seats</h2>
    <p>Available Seats: <strong id="seatCount">Loading...</strong></p>
    <button onclick="bookSeat()">Book Seat</button>
    <button onclick="cancelSeat()">Cancel Seat</button>
  </div>

  <!-- Parcel Booking Section -->
  <div class="section">
    <h2>📦 Parcel Booking</h2>
    <input type="text" id="parcelInput" placeholder="Enter parcel order" />
    <button onclick="bookParcel()">Place Parcel Order</button>
  </div>

  <!-- Contact Section -->
  <div class="section">
    <h2>📞 Contact Us</h2>
    <input type="text" id="contactName" placeholder="Your Name" />
    <input type="text" id="contactMessage" placeholder="Your Message" />
    <button onclick="sendContact()">Send Message</button>
  </div>

  <script>
    // Replace this with your own Firebase configuration
    const firebaseConfig = {
      apiKey: "YOUR_API_KEY",
      authDomain: "your-app.firebaseapp.com",
      databaseURL: "https://your-app.firebaseio.com",
      projectId: "your-app",
      storageBucket: "your-app.appspot.com",
      messagingSenderId: "123456789",
      appId: "1:123456789:web:abc123"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();
    const seatRef = db.ref("availableSeats");

    // Listen for live updates
    seatRef.on("value", snapshot => {
      const count = snapshot.val();
      document.getElementById("seatCount").innerText = count ?? "0";
    });

    function bookSeat() {
      seatRef.transaction(current => {
        if (current > 0) return current - 1;
        alert("No seats available!");
        return current;
      });
    }

    function cancelSeat() {
      seatRef.transaction(current => {
        if (current < 8) return current + 1;
        alert("All seats are already available.");
        return current;
      });
    }

    function bookParcel() {
      const parcel = document.getElementById('parcelInput').value.trim();
      if (parcel) {
        alert(`Parcel order placed: ${parcel}`);
        document.getElementById('parcelInput').value = '';
      } else {
        alert('Please enter a parcel order.');
      }
    }

    function sendContact() {
      const name = document.getElementById('contactName').value.trim();
      const message = document.getElementById('contactMessage').value.trim();
      if (name && message) {
        alert(`Message sent from ${name}: ${message}`);
        document.getElementById('contactName').value = '';
        document.getElementById('contactMessage').value = '';
      } else {
        alert('Please fill in both fields.');
      }
    }
  </script>

</body>
</html>
